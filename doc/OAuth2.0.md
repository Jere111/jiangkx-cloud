# 1、概述

## 1.1、OAuth2.0是什么？

OAuth(Open Authorization)是一个开放标准，允许用户让第三方应用访问该用户在某一网站上存储的私密的资源（如照片，视频，联系人列表），**而无需将用户名和密码提供给第三方应用**。

OAuth 允许用户提供一个**令牌**，而不是用户名和密码来访问他们存放在特定服务提供者的数据。

## 1.2、OAuth2.0角色解释

在 OAuth2.0 中，有如下角色：

① **Authorization** Server：**认证**服务器，用于认证用户。如果客户端认证通过，则发放访问资源服务器的**令牌**。

② **Resource** Server：**资源**服务器，拥有受保护资源。如果请求包含正确的**访问令牌**，则可以访问资源。

> 友情提示：提供管理后台、客户端 API 的服务，都可以认为是 Resource Server。

③ **Client**：客户端。它请求资源服务器时，会带上**访问令牌**，从而成功访问资源。

> 友情提示：Client 可以是浏览器、客户端，也可以是内部服务。

④ Resource **Owner**：资源拥有者。最终用户，他有访问资源的**账号**与**密码**。

> 友情提示：可以简单把 Resource Owner 理解成人，她在使用 Client 访问资源。

## 1.3、OAuth 2.0 运行流程

如下是 OAuth 2.0 的**授权码模式**的运行流程：

![OAuth 2.0 运行流程](http://static.iocoder.cn/6a92a862da97a4692c755c7e186dfd07.jpg)

- （A）用户打开客户端以后，客户端要求用户给予授权。
- （B）用户同意给予客户端授权。
- （C）客户端使用上一步获得的授权，向认证服务器申请令牌。
- （D）认证服务器对客户端进行认证以后，确认无误，同意发放令牌。
- （E）客户端使用令牌，向资源服务器申请获取资源。
- （F）资源服务器确认令牌无误，同意向客户端开放资源。

## 1.4、OAuth 2.0 授权模式

客户端必须得到用户的授权（Authorization Grant），才能获得访问令牌（Access Token）。

OAuth2.0 定义了四种授权方式：

- 授权码模式（Authorization Code）
- 密码模式（Resource Owner Password Credentials）
- 简化模式（Implicit）
- 客户端模式（Client Credentials）

其中，**密码模式**和**授权码模式**比较常用。